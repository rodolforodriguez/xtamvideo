// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.27/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/plots/labelsRendering/_ColumnsLabelRenderingFix",["dojo/_base/declare","./LabelsUtil","./LabelOverlapFixer"],function(e,h,k){return e(null,{_labelBoxes:null,resetEvents:function(){this.inherited(arguments);this._labelBoxes=[]},createLabel:function(b,c,d,a){function f(){var f=h.getLabelInfo(g,c,a);g._renderOutside(f,b,c,d,a)}function e(){var e=h.getLabelInfo(g,c,a);e.box.h>d.height?g.chart.plotArea.height-d.height>e.box.h&&f():g._renderInside(e,
b,c,d,a)}var g=this;this.opt.labels&&"outside"===this.opt.labelStyle?f():this.opt.labels&&"inside"===this.opt.labelStyle&&e()},_renderOutside:function(b,c,d,a,f){this._labelBoxes.push({x:a.x+a.width/2-b.box.w/2,y:0<d[d.valueProp]?a.y-this.opt.labelOffset-b.box.h*(b.numRows-1)/2:a.y+a.height+this.opt.labelOffset+b.box.h*(1===b.numRows?1:b.numRows/4),w:b.box.w,h:b.box.h,group:c,text:b.text})},_renderInside:function(b,c,d,a,f){this._labelBoxes.push({x:a.x+a.width/2-b.box.w/2,y:a.y+a.height/2+b.box.h/
2-b.box.h*(b.numRows-1)/2,w:b.box.w,h:b.box.h,group:c,text:b.text})},_renderLabels:function(b,c,d,a){k.fixLabelsOverlap(this._labelBoxes,c,d,this._getFixLabelsParams(),a);this._labelBoxes.forEach(function(a){a.hidden||this.renderLabel(a.group,a.x,a.y,a.text,b,!0,"left")},this)},_getFixLabelsParams:function(){return{allowXShift:!0,allowYShift:!0,xGap:3,yGap:3,xTolerance:0,yTolerance:0}}})});