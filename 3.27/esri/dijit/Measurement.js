// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.27/esri/copyright.txt for details.
//>>built
require({cache:{"dojo/debounce":function(){define([],function(){return function(l,q){var g;return function(){g&&clearTimeout(g);var h=this,d=arguments;g=setTimeout(function(){l.apply(h,d)},q)}}})},"dijit/Menu":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ./popup ./DropDownMenu dojo/ready".split(" "),function(l,q,g,h,d,k,f,c,a,r,n,v,e,x,t,m){n("dijit-legacy-requires")&&
m(0,function(){l(["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])});return g("dijit.Menu",t,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):q.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(a){return e.get(this._iframeContentDocument(a))||
this._iframeContentDocument(a).__parent__||a.name&&document.frames[a.name]||null},_iframeContentDocument:function(a){return a.contentDocument||a.contentWindow&&a.contentWindow.document||a.name&&document.frames[a.name]&&document.frames[a.name].document||null},bindDomNode:function(m){m=h.byId(m,this.ownerDocument);var f;if("iframe"==m.tagName.toLowerCase()){var e=m;f=this._iframeContentWindow(e);f=v.body(f.document)}else f=m==v.body(this.ownerDocument)?this.ownerDocument.documentElement:m;var n={node:m,
iframe:e};d.set(m,"_dijitMenu"+this.id,this._bindings.push(n));var g=a.hitch(this,function(a){var m=this.selector,f=m?function(a){return r.selector(m,a)}:function(a){return a},n=this;return[r(a,f(this.leftClickToOpen?"click":"contextmenu"),function(a){a.stopPropagation();a.preventDefault();(new Date).getTime()<n._lastKeyDown+500||n._scheduleOpen(this,e,{x:a.pageX,y:a.pageY},a.target)}),r(a,f("keydown"),function(a){if(93==a.keyCode||a.shiftKey&&a.keyCode==c.F10||n.leftClickToOpen&&a.keyCode==c.SPACE)a.stopPropagation(),
a.preventDefault(),n._scheduleOpen(this,e,null,a.target),n._lastKeyDown=(new Date).getTime()})]});n.connects=f?g(f):[];e&&(n.onloadHandler=a.hitch(this,function(){var a=this._iframeContentWindow(e),a=v.body(a.document);n.connects=g(a)}),e.addEventListener?e.addEventListener("load",n.onloadHandler,!1):e.attachEvent("onload",n.onloadHandler))},unBindDomNode:function(a){var m;try{m=h.byId(a,this.ownerDocument)}catch(I){return}a="_dijitMenu"+this.id;if(m&&d.has(m,a)){for(var c=d.get(m,a)-1,f=this._bindings[c],
e;e=f.connects.pop();)e.remove();(e=f.iframe)&&(e.removeEventListener?e.removeEventListener("load",f.onloadHandler,!1):e.detachEvent("onload",f.onloadHandler));d.remove(m,a);delete this._bindings[c]}},_scheduleOpen:function(a,m,c,e){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:e,delegatedTarget:a,iframe:m,coords:c})},1))},_openMyself:function(a){function m(){l.refocus&&v&&v.focus();x.close(l)}var c=a.target,e=a.iframe,d=a.coords,g=!d;this.currentTarget=
a.delegatedTarget;if(d){if(e){a=k.position(e,!0);var c=this._iframeContentWindow(e),c=k.docScroll(c.document),r=f.getComputedStyle(e),t=f.toPixelValue,A=(n("ie")&&n("quirks")?0:t(e,r.paddingLeft))+(n("ie")&&n("quirks")?t(e,r.borderLeftWidth):0),e=(n("ie")&&n("quirks")?0:t(e,r.paddingTop))+(n("ie")&&n("quirks")?t(e,r.borderTopWidth):0);d.x+=a.x+A-c.x;d.y+=a.y+e-c.y}}else d=k.position(c,!0),d.x+=10,d.y+=10;var l=this,e=this._focusManager.get("prevNode");a=this._focusManager.get("curNode");var v=!a||
h.isDescendant(a,this.domNode)?e:a;x.open({popup:this,x:d.x,y:d.y,onExecute:m,onCancel:m,orient:this.isLeftToRight()?"L":"R"});this.focus();g||this.defer(function(){this._cleanUp(!0)});this._onBlur=function(){this.inherited("_onBlur",arguments);x.close(this)}},destroy:function(){q.forEach(this._bindings,function(a){a&&this.unBindDomNode(a.node)},this);this.inherited(arguments)}})})},"dijit/DropDownMenu":function(){define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_MenuBase"],
function(l,q,g,h){return l("dijit.DropDownMenu",h,{templateString:g,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev()},_onDownArrow:function(){this.focusNext()},_onRightArrow:function(d){this._moveToPopup(d);d.stopPropagation();d.preventDefault()},_onLeftArrow:function(d){if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(!1);else d.stopPropagation(),d.preventDefault()}})})},"dijit/_MenuBase":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/lang dojo/mouse dojo/on dojo/window ./a11yclick ./registry ./_Widget ./_CssStateMixin ./_KeyNavContainer ./_TemplatedMixin".split(" "),
function(l,q,g,h,d,k,f,c,a,r,n,v,e,x,t){return q("dijit._MenuBase",[v,t,x,e],{selected:null,_setSelectedAttr:function(a){this.selected!=a&&(this.selected&&(this.selected._setSelected(!1),this._onChildDeselect(this.selected)),a&&a._setSelected(!0),this._set("selected",a))},activated:!1,_setActivatedAttr:function(a){d.toggle(this.domNode,"dijitMenuActive",a);d.toggle(this.domNode,"dijitMenuPassive",!a);this._set("activated",a)},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:!1,
childSelector:function(a){var e=n.byNode(a);return a.parentNode==this.containerNode&&e&&e.focus},postCreate:function(){var a=this,e="string"==typeof this.childSelector?this.childSelector:k.hitch(this,"childSelector");this.own(c(this.containerNode,c.selector(e,f.enter),function(){a.onItemHover(n.byNode(this))}),c(this.containerNode,c.selector(e,f.leave),function(){a.onItemUnhover(n.byNode(this))}),c(this.containerNode,c.selector(e,r),function(e){a.onItemClick(n.byNode(this),e);e.stopPropagation()}),
c(this.containerNode,c.selector(e,"focusin"),function(){a._onItemFocus(n.byNode(this))}));this.inherited(arguments)},onKeyboardSearch:function(a,e,c,f){this.inherited(arguments);if(a&&(-1==f||a.popup&&1==f))this.onItemClick(a,e)},_keyboardSearchCompare:function(a,e){return a.shortcutKey?e==a.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,
a);else(a=this._getTopMenu())&&a._isMenuBar&&a.focusNext()},_onPopupHover:function(){this.set("selected",this.currentPopupItem);this._stopPendingCloseTimer()},onItemHover:function(a){this.activated?(this.set("selected",a),!a.popup||a.disabled||this.hover_timer||(this.hover_timer=this.defer(function(){this._openItemPopup(a)},this.popupDelay))):Infinity>this.passivePopupDelay&&(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer(function(){this.onItemClick(a,
{type:"click"})},this.passivePopupDelay));this._hoveredChild=a;a._set("hovering",!0)},_onChildDeselect:function(a){this._stopPopupTimer();this.currentPopupItem==a&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer(function(){this.currentPopupItem=this._pendingClose_timer=null;a._closePopup()},this.popupDelay))},onItemUnhover:function(a){this._hoveredChild==a&&(this._hoveredChild=null);this.passive_hover_timer&&(this.passive_hover_timer.remove(),this.passive_hover_timer=null);a._set("hovering",
!1)},_stopPopupTimer:function(){this.hover_timer&&(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,e){this.passive_hover_timer&&this.passive_hover_timer.remove();this.focusChild(a);if(a.disabled)return!1;a.popup?(this.set("selected",a),this.set("activated",!0),e=/^key/.test(e._origType||
e.type)||0==e.clientX&&0==e.clientY,this._openItemPopup(a,e)):(this.onExecute(),a._onClick?a._onClick(e):a.onClick(e))},_openItemPopup:function(a,e){if(a!=this.currentPopupItem){this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup());this._stopPopupTimer();var f=a.popup;f.parentMenu=this;this.own(this._mouseoverHandle=c.once(f.domNode,"mouseover",k.hitch(this,"_onPopupHover")));var d=this;a._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){e&&
d.focusChild(a);d._cleanUp()},onExecute:k.hitch(this,"_cleanUp",!0),onClose:function(){d._mouseoverHandle&&(d._mouseoverHandle.remove(),delete d._mouseoverHandle)}},e);this.currentPopupItem=a}},onOpen:function(){this.isShowingNow=!0;this.set("activated",!0)},onClose:function(){this.set("activated",!1);this.set("selected",null);this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();this.currentPopupItem&&(this.focused&&(h.set(this.selected.focusNode,"tabIndex",this.tabIndex),
this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),this.currentPopupItem=null)},_onItemFocus:function(a){if(this._hoveredChild&&this._hoveredChild!=a)this.onItemUnhover(this._hoveredChild);this.set("selected",a)},_onBlur:function(){this._cleanUp(!0);this.inherited(arguments)},_cleanUp:function(a){this._closeChild();"undefined"==typeof this.isShowingNow&&this.set("activated",!1);a&&this.set("selected",null)}})})},"dijit/_KeyNavContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/keys dojo/_base/lang ./registry ./_Container ./_FocusMixin ./_KeyNavMixin".split(" "),
function(l,q,g,h,d,k,f,c,a,r){return q("dijit._KeyNavContainer",[a,r,c],{connectKeyNavHandlers:function(a,c){var e=this._keyNavCodes={},f=k.hitch(this,"focusPrev"),n=k.hitch(this,"focusNext");l.forEach(a,function(a){e[a]=f});l.forEach(c,function(a){e[a]=n});e[d.HOME]=k.hitch(this,"focusFirstChild");e[d.END]=k.hitch(this,"focusLastChild")},startupKeyNavChildren:function(){h.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments);l.forEach(this.getChildren(),
k.hitch(this,"_startupChild"))},addChild:function(a,c){this.inherited(arguments);this._startupChild(a)},_startupChild:function(a){a.set("tabIndex","-1")},_getFirst:function(){var a=this.getChildren();return a.length?a[0]:null},_getLast:function(){var a=this.getChildren();return a.length?a[a.length-1]:null},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},childSelector:function(a){return(a=
f.byNode(a))&&a.getParent()==this}})})},"dijit/_KeyNavMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dijit/registry dijit/_FocusMixin".split(" "),function(l,q,g,h,d,k,f,c){return q("dijit._KeyNavMixin",c,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);g.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var a=this._keyNavCodes={};a[h.HOME]=d.hitch(this,"focusFirstChild");a[h.END]=d.hitch(this,
"focusLastChild");a[this.isLeftToRight()?h.LEFT_ARROW:h.RIGHT_ARROW]=d.hitch(this,"_onLeftArrow");a[this.isLeftToRight()?h.RIGHT_ARROW:h.LEFT_ARROW]=d.hitch(this,"_onRightArrow");a[h.UP_ARROW]=d.hitch(this,"_onUpArrow");a[h.DOWN_ARROW]=d.hitch(this,"_onDownArrow")}var c=this,a="string"==typeof this.childSelector?this.childSelector:d.hitch(this,"childSelector");this.own(k(this.domNode,"keypress",d.hitch(this,"_onContainerKeypress")),k(this.domNode,"keydown",d.hitch(this,"_onContainerKeydown")),k(this.domNode,
"focus",d.hitch(this,"_onContainerFocus")),k(this.containerNode,k.selector(a,"focusin"),function(a){c._onChildFocus(f.getEnclosingWidget(this),a)}))},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},
focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusChild:function(a,c){a&&(this.focusedChild&&a!==this.focusedChild&&this._onChildBlur(this.focusedChild),a.set("tabIndex",this.tabIndex),a.focus(c?"end":"start"))},_onContainerFocus:function(a){a.target!==this.domNode||this.focusedChild||this.focus()},_onFocus:function(){g.set(this.domNode,"tabIndex","-1");this.inherited(arguments)},_onBlur:function(a){g.set(this.domNode,"tabIndex",this.tabIndex);this.focusedChild&&(this.focusedChild.set("tabIndex",
"-1"),this.lastFocusedChild=this.focusedChild,this._set("focusedChild",null));this.inherited(arguments)},_onChildFocus:function(a){a&&a!=this.focusedChild&&(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),a.set("tabIndex",this.tabIndex),this.lastFocused=a,this._set("focusedChild",a))},_searchString:"",multiCharSearchDuration:1E3,onKeyboardSearch:function(a,c,f,d){a&&this.focusChild(a)},_keyboardSearchCompare:function(a,c){var f=a.domNode;a=(a.label||(f.focusNode?
f.focusNode.label:"")||f.innerText||f.textContent||"").replace(/^\s+/,"").substr(0,c.length).toLowerCase();return c.length&&a==c?-1:0},_isFormElement:function(a){return"INPUT"===a.tagName||"TEXTAREA"===a.tagName||"SELECT"===a.tagName||"BUTTON"===a.tagName},_onContainerKeydown:function(a){if(!this._isFormElement(document.activeElement)){var c=this._keyNavCodes[a.keyCode];c?(c(a,this.focusedChild),a.stopPropagation(),a.preventDefault(),this._searchString=""):a.keyCode!=h.SPACE||!this._searchTimer||
a.ctrlKey||a.altKey||a.metaKey||(a.stopImmediatePropagation(),a.preventDefault(),this._keyboardSearch(a," "))}},_onContainerKeypress:function(a){this._isFormElement(document.activeElement)||a.charCode<=h.SPACE||a.ctrlKey||a.altKey||a.metaKey||(a.preventDefault(),a.stopPropagation(),this._keyboardSearch(a,String.fromCharCode(a.charCode).toLowerCase()))},_keyboardSearch:function(a,c){var f=null,g,e=0;d.hitch(this,function(){this._searchTimer&&this._searchTimer.remove();this._searchString+=c;var a=/^(.)\1*$/.test(this._searchString)?
1:this._searchString.length;g=this._searchString.substr(0,a);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString=""},this.multiCharSearchDuration);var d=this.focusedChild||null;if(1==a||!d)if(d=this._getNextFocusableChild(d,1),!d)return;a=d;do{var n=this._keyboardSearchCompare(d,g);n&&0==e++&&(f=d);if(-1==n){e=-1;break}d=this._getNextFocusableChild(d,1)}while(d&&d!=a)})();this.onKeyboardSearch(f,a,g,e)},_onChildBlur:function(){},_getNextFocusableChild:function(a,c){var f=
a;do{if(a)a=this._getNext(a,c);else if(a=this[0<c?"_getFirst":"_getLast"](),!a)break;if(null!=a&&a!=f&&a.isFocusable())return a}while(a!=f);return null},_getFirst:function(){return null},_getLast:function(){return null},_getNext:function(a,c){if(a)for(a=a.domNode;a;)if((a=a[0>c?"previousSibling":"nextSibling"])&&"getAttribute"in a){var d=f.byNode(a);if(d)return d}return null}})})},"dijit/MenuItem":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/kernel dojo/sniff dojo/_base/lang ./_Widget ./_TemplatedMixin ./_Contained ./_CssStateMixin dojo/text!./templates/MenuItem.html".split(" "),
function(l,q,g,h,d,k,f,c,a,r,n,v){f=l("dijit.MenuItem"+(k("dojo-bidi")?"_NoBidi":""),[c,a,r,n],{templateString:v,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(a){this._set("label",a);var c="",e;e=a.search(/{\S}/);if(0<=e){var c=a.charAt(e+1),f=a.substr(0,e);a=a.substr(e+3);e=f+c+a;a=f+'\x3cspan class\x3d"dijitMenuItemShortcutKey"\x3e'+c+"\x3c/span\x3e"+a}else e=a;this.domNode.setAttribute("aria-label",e+" "+this.accelKey);this.containerNode.innerHTML=a;this._set("shortcutKey",c)},iconClass:"dijitNoIcon",
_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(a){!a||"label"in this.params||this._set("label",a.innerHTML)},buildRendering:function(){this.inherited(arguments);g.set(this.containerNode,"id",this.id+"_text");this.accelKeyNode&&g.set(this.accelKeyNode,"id",this.id+"_accel");q.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==k("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(e){}},_setSelected:function(a){h.toggle(this.domNode,
"dijitMenuItemSelected",a)},setLabel:function(a){d.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},setDisabled:function(a){d.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",a)},_setDisabledAttr:function(a){this.focusNode.setAttribute("aria-disabled",a?"true":"false");this._set("disabled",a)},_setAccelKeyAttr:function(a){this.accelKeyNode&&(this.accelKeyNode.style.display=
a?"":"none",this.accelKeyNode.innerHTML=a,g.set(this.containerNode,"colSpan",a?"1":"2"));this._set("accelKey",a)}});k("dojo-bidi")&&(f=l("dijit.MenuItem",f,{_setLabelAttr:function(a){this.inherited(arguments);"auto"===this.textDir&&this.applyTextDir(this.textDirNode)}}));return f})},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(l,q){return l("dijit._Contained",null,{_getSibling:function(g){var h=this.getParent();return h&&h._getSiblingOfChild&&h._getSiblingOfChild(this,
"previous"==g?-1:1)||null},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var g=this.getParent();return g&&g.getIndexOfChild?g.getIndexOfChild(this):-1}})})},"esri/tasks/AreasAndLengthsParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel".split(" "),function(l,q,g,h,d,k){l=l(null,{declaredClass:"esri.tasks.AreasAndLengthsParameters",
polygons:null,lengthUnit:null,areaUnit:null,calculationType:null,toJson:function(){var f=g.map(this.polygons,function(a){return a.toJson()}),c={};c.polygons=h.toJson(f);f=this.polygons[0].spatialReference;c.sr=f.wkid?f.wkid:h.toJson(f.toJson());this.lengthUnit&&(c.lengthUnit=this.lengthUnit);this.areaUnit&&(q.isString(this.areaUnit)?c.areaUnit=h.toJson({areaUnit:this.areaUnit}):c.areaUnit=this.areaUnit);this.calculationType&&(c.calculationType=this.calculationType);return c}});d("extend-esri")&&q.setObject("tasks.AreasAndLengthsParameters",
l,k);return l})},"esri/tasks/LengthsParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel".split(" "),function(l,q,g,h,d,k){l=l(null,{declaredClass:"esri.tasks.LengthsParameters",polylines:null,lengthUnit:null,geodesic:null,calculationType:null,toJson:function(){var f=g.map(this.polylines,function(a){return a.toJson()}),c={};c.polylines=h.toJson(f);f=this.polylines[0].spatialReference;c.sr=f.wkid?f.wkid:h.toJson(f.toJson());this.lengthUnit&&
(c.lengthUnit=this.lengthUnit);this.geodesic&&(c.geodesic=this.geodesic);this.calculationType&&(c.calculationType=this.calculationType);return c}});d("extend-esri")&&q.setObject("tasks.LengthsParameters",l,k);return l})},"esri/numberUtils":function(){define(["dojo/has","dojo/number","dojo/i18n!dojo/cldr/nls/number","./kernel"],function(l,q,g,h){var d=function(f,c){return f-c},k={_reNumber:/^-?(\d+)(\.(\d+))?$/i,getDigits:function(f){var c=String(f),a=c.match(k._reNumber);f={integer:0,fractional:0};
a&&a[1]?(f.integer=a[1].split("").length,f.fractional=a[3]?a[3].split("").length:0):-1<c.toLowerCase().indexOf("e")&&(a=c.split("e"),c=a[0],a=a[1],c&&a&&(c=Number(c),a=Number(a),(f=0<a)||(a=Math.abs(a)),c=k.getDigits(c),f?(c.integer+=a,c.fractional=a>c.fractional?0:c.fractional-a):(c.fractional+=a,c.integer=a>c.integer?1:c.integer-a),f=c));return f},getFixedNumbers:function(f,c){var a;a=Number(f.toFixed(c));a<f?f=a+1/Math.pow(10,c):(f=a,a-=1/Math.pow(10,c));a=Number(a.toFixed(c));f=Number(f.toFixed(c));
return[a,f]},getPctChange:function(f,c,a,d){var g={prev:null,next:null},h;null!=a&&(h=f-a,g.prev=Math.floor(Math.abs(100*(c-a-h)/h)));null!=d&&(h=d-f,g.next=Math.floor(Math.abs(100*(d-c-h)/h)));return g},round:function(f,c){f=f.slice(0);var a,g,h,l,e,q,t,m,A=c&&null!=c.tolerance?c.tolerance:2,y=c&&c.indexes,H=c&&null!=c.strictBounds?c.strictBounds:!1;if(y)y.sort(d);else for(y=[],e=0;e<f.length;e++)y.push(e);for(e=0;e<y.length;e++)if(m=y[e],c=f[m],a=0===m?null:f[m-1],g=m===f.length-1?null:f[m+1],h=
k.getDigits(c),h=h.fractional){q=0;for(t=!1;q<=h&&!t;)l=k.getFixedNumbers(c,q),l=H&&0===e?l[1]:l[0],t=k.hasMinimalChange(c,l,a,g,A),q++;t&&(f[m]=l)}return f},hasMinimalChange:function(f,c,a,d,g){f=k.getPctChange(f,c,a,d);c=null==f.prev||f.prev<=g;a=null==f.next||f.next<=g;return c&&a||f.prev+f.next<=2*g},_reAllZeros:new RegExp("\\"+g.decimal+"0+$","g"),_reSomeZeros:/(\d)0*$/g,format:function(d,c){c=c||{places:20,round:-1};(d=q.format(d,c))&&(d=d.replace(k._reSomeZeros,"$1").replace(k._reAllZeros,
""));return d}};l("extend-esri")&&(h.numberUtils=k);return k})},"url:dijit/templates/Menu.html":'\x3ctable class\x3d"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role\x3d"menu" tabIndex\x3d"${tabIndex}"\r\n\t   cellspacing\x3d"0"\x3e\r\n\t\x3ctbody class\x3d"dijitReset" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/tbody\x3e\r\n\x3c/table\x3e\r\n',"url:dijit/templates/MenuItem.html":'\x3ctr class\x3d"dijitReset" data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,textDirNode"\r\n\t\trole\x3d"presentation"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"arrowWrapper" style\x3d"visibility: hidden"\x3e\r\n\t\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuExpand"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"dijitMenuExpandA11y"\x3e+\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"url:esri/dijit/templates/Measurement.html":"\x3cdiv class\x3d\"esriMeasurement\"\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' class\x3d'esriMeasurementButtonContainer'\x3e\r\n    \x3cdiv dojoType\x3d'dijit.form.ToggleButton' baseClass\x3d'esriButton' dojoAttachPoint\x3d'_areaButton' iconClass\x3d'areaIcon' showLabel\x3d'false' dojoAttachEvent\x3d'onClick:_areaButtonToggle'\x3e\x3c/div\x3e\r\n    \x3cdiv dojoType\x3d'dijit.form.ToggleButton' baseClass\x3d'esriButton' dojoAttachPoint\x3d'_distanceButton' iconClass\x3d'distanceIcon' showLabel\x3d'false' dojoAttachEvent\x3d'onClick:_distanceButtonToggle'\x3e\x3c/div\x3e\r\n    \x3cdiv dojoType\x3d'dijit.form.ToggleButton' baseClass\x3d'esriButton' dojoAttachPoint\x3d'_locationButton' iconClass\x3d'locationIcon' showLabel\x3d'false' dojoAttachEvent\x3d'onClick:_locationButtonToggle'\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d\"esriMeasurementSeparator\"\x3e|\x3c/div\x3e\r\n    \x3cbutton dojoType\x3d'dijit.form.DropDownButton' baseClass\x3d'esriToggleButton' dojoAttachPoint\x3d'_unitDropDown' label\x3d'unit' value\x3d'unit' style\x3d'visibility:hidden;'\x3e\x3c/button\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultLabel' class\x3d'resultLabel esriMeasurementResultLabel'\x3e\x3c/div\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultValueContainer' align\x3d'leading' class\x3d\"esriMeasurementResultValue\"\x3e\r\n    \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultValue' class\x3d'result'\x3e\x26nbsp;\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultTable' align\x3d'leading' class\x3d\"resultTable esriMeasurementTableContainer\" style\x3d\"display:none;\"\x3e\r\n    \x3ctable class\x3d\"esriMeasurementResultTable\"\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableHeader\" colspan\x3d\"2\"\x3e${_NLS_Lat}\x3c/td\x3e\x3ctd class\x3d\"esriMeasurementTableHeader\"\x3e${_NLS_Lon}\x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr class\x3d\"esriMeasurementTableRow\" dojoAttachPoint\x3d\"_mouseRow\"\x3e\r\n        \x3ctd dojoAttachPoint\x3d\"mouseCell\"\x3e\x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"mouseLatitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"mouseLongitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr class\x3d\"esriMeasurementTableRow\"\x3e\r\n        \x3ctd dojoAttachPoint\x3d\"pinCell\"\x3e\x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"markerLatitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"markerLongitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/table\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e",
"*noref":1}});
define("esri/dijit/Measurement","require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Color dojo/debounce dojo/sniff dojo/dom-style dojo/dom-construct dojox/gfx dijit/_Widget dijit/registry dijit/Menu dijit/MenuItem ../symbols/PictureMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/jsonUtils ../geometry/geodesicUtils ../geometry/webMercatorUtils ../geometry/Point ../geometry/Polyline ../geometry/Polygon ../graphic ../tasks/AreasAndLengthsParameters ../tasks/LengthsParameters ../tasks/GeometryService ../kernel ../config ../domUtils ../numberUtils ../lang ../units ../WKIDUnitConversion ../SpatialReference dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ./_EventedWidget dojo/text!./templates/Measurement.html dojo/i18n!../nls/jsapi dijit/form/ToggleButton dijit/form/DropDownButton dijit/layout/ContentPane".split(" "),function(l,
q,g,h,d,k,f,c,a,r,n,v,e,x,t,m,A,y,H,E,B,I,w,G,u,K,L,M,N,O,C,D,P,F,Q,J,R,S,T,U,z){q=q([T,v,R,S],{declaredClass:"esri.dijit.Measurement",widgetsInTemplate:!0,templateString:U,_map:null,_geometryService:null,_interpolatedMap:null,_mouseImgURL:null,_defaultPinURL:null,_measureGraphics:[],_measureGraphic:null,_locationGraphic:null,_tempGraphic:null,_polylineGraphics:null,_polygonGraphic:null,_pointSymbol:null,_useDefaultPointSymbol:!0,_defaultLineSymbol:null,_lineSymbol:null,_areaLineSymbol:null,_defaultFillSymbol:null,
_fillSymbol:null,_borderlessFillSymbol:null,_defaultCustomPointSymbolHeight:25,_defaultCustomPointSymbolWidth:25,_userGeometry:null,_currentGeometry:null,_inputPoints:[],_unitDictionary:[],_densificationRatio:.07848050723825097,numberPattern:"#,###,###,##0.0",result:null,_defaultDistanceUnit:null,_defaultAreaUnit:null,_defaultLocationUnit:null,currentDistanceUnit:null,currentAreaUnit:null,currentLocationUnit:null,_unitStrings:{},_locationUnitStrings:[],_locationUnitStringsLong:[],_distanceUnitStrings:[],
_distanceUnitStringsLong:[],_areaUnitStrings:[],_areaUnitStringsLong:[],_calculatingMsg:null,_gsErrorMsg:null,_NLS_Lat:null,_NLS_Lon:null,_mouseMoveMapHandler:null,_mouseClickMapHandler:null,_doubleClickMapHandler:null,_mouseDragMapHandler:null,_clickMapHandler:null,_mapExtentChangeHandler:null,_geometryAreaHandler:null,_snappingCallback:null,_calcTimer:null,_buttonDijits:{},previousTool:null,activeTool:null,markerLongitude:null,markerLatitude:null,mouseLongitude:null,mouseLatitude:null,_eventMap:{"measure-start":["toolName",
"unitName"],measure:["toolName","geometry","values","unitName","segmentLength"],"measure-end":["toolName","geometry","values","unitName"],"tool-change":["toolName","unitName","previousToolName"],"unit-change":["unitName","toolName"]},constructor:function(b,a){if(b&&b.map){this._map=b.map;if(this._map.loaded)this._map.cs=this._checkCS(this._map.spatialReference),this._interpolatedMap=!("Web Mercator"===this._map.cs||"PCS"===this._map.cs);else var p=d.connect(this._map,"onLoad",this,function(){d.disconnect(p);
p=null;this._map.cs=this._checkCS(this._map.spatialReference);this._interpolatedMap=!("Web Mercator"===this._map.cs||"PCS"===this._map.cs)});this._geometryService=O.defaults.geometryService;this._mouseImgURL=l.toUrl("./images/cursor16x24.png");this._defaultPinURL=l.toUrl("./images/esriGreenPin16x26.png");this._defaultLineSymbol=new A(A.STYLE_SOLID,new k([0,128,255]),3);this._defaultFillSymbol=new y(A.STYLE_SOLID,this._defaultLineSymbol,new k([0,0,0,.5]));b.pointSymbol?(this._pointSymbol=b.pointSymbol,
this._useDefaultPointSymbol=!1):(this._pointSymbol=new m(this._defaultPinURL,16,26),this._pointSymbol.setOffset(0,12));this._fillSymbol=a=b.fillSymbol||this._defaultFillSymbol;this._areaLineSymbol=a.outline||this._defaultLineSymbol;this._borderlessFillSymbol=H.fromJson(a.toJson());this._borderlessFillSymbol.setOutline(null);this._lineSymbol=b.lineSymbol?b.lineSymbol:this._defaultLineSymbol;this._defaultDistanceUnit=b.defaultLengthUnit?b.defaultLengthUnit:F.MILES;this._defaultAreaUnit=b.defaultAreaUnit?
b.defaultAreaUnit:F.ACRES;this._defaultLocationUnit=b.defaultLocationUnit?b.defaultLocationUnit:F.DECIMAL_DEGREES;this._snappingCallback=g.hitch(this,this._snappingCallback);b.geometry&&(this._userGeometry=b.geometry);this._calcTimer=null;this.advancedLocationUnits=b.advancedLocationUnits||!1;this._NLS_Lon=z.widgets.measurement.NLS_longitude;this._NLS_Lat=z.widgets.measurement.NLS_latitude;this._gsErrorMsg=z.widgets.measurement.NLS_geometry_service_error;this._calculatingMsg=z.widgets.measurement.NLS_calculating;
this._geometryServiceLength=f(this._geometryServiceLength,250)}else console.log("Unable to find the required 'map' property in widget parameters")},startup:function(){this._setupDictionaries();r.create("img",{src:this._mouseImgURL,style:"vertical-align: middle"},this.mouseCell);this._useDefaultPointSymbol?r.create("img",{src:this._defaultPinURL,style:"vertical-align: middle"},this.pinCell):this._drawPointGraphics(this.pinCell);if(this._userGeometry)if(this._map.loaded)this._measureCustomGeometry(this._userGeometry),
this._userGeometry=null;else var b=d.connect(this._map,"onLoad",this,function(){d.disconnect(b);b=null;this._measureCustomGeometry(this._userGeometry);this._userGeometry=null})},destroy:function(){this._resetToolState();this.clearResult();this.inherited(arguments);this._map=this._geometryService=this._measureGraphics=this._measureGraphic=this._tempGraphic=null},setTool:function(b,p){this.previousTool=this.activeTool||null;this._polylineGraphics=[];this._resetToolState();this._polygonGraphic&&(this._map.graphics.remove(this._polygonGraphic),
this._polygonGraphic=null);var c=e.byNode(this._buttonDijits[b].domNode).checked;a.set(this._unitDropDown.domNode,"visibility","visible");e.byNode(this._buttonDijits.area.domNode).set("checked",!1);e.byNode(this._buttonDijits.distance.domNode).set("checked",!1);e.byNode(this._buttonDijits.location.domNode).set("checked",!1);if(!0===p||!1===p)c=p;e.byNode(this._buttonDijits[b].domNode).set("checked",c);this._toggleLocationResultsTable(!1,!0);c?(this.activeTool=b,(this._dblClickZoom=this._map.isDoubleClickZoom)&&
this._map.disableDoubleClickZoom(),"area"===b?this._setupAreaTool():"distance"===b?this._setupDistanceTool():"location"===b&&this._setupLocationTool(),this._map.snappingManager&&(this._map.snappingManager._startSelectionLayerQuery(),this._map.snappingManager._setUpSnapping())):(this.activeTool=null,a.set(this._unitDropDown.domNode,"visibility","hidden"));if(this.activeTool!==this.previousTool)this.onToolChange(this.activeTool,this.getUnit(),this.previousTool)},measure:function(b){b&&this._measureCustomGeometry(b)},
clearResult:function(){var b=this._map,a;this.result=0;this.resultValue.setContent("\x26nbsp");for(a=0;a<this._measureGraphics.length;a++)b.graphics.remove(this._measureGraphics[a]);this._measureGraphic=this._locationGraphic=this._currentGeometry=null;this._measureGraphics=[];b.graphics.remove(this._tempGraphic);d.disconnect(this._mouseMoveMapHandler);this._mouseMoveMapHandler=null},show:function(){C.show(this.domNode)},hide:function(){C.hide(this.domNode)},showTool:function(b){a.set(this._buttonDijits[b].domNode,
"display","inline-block")},hideTool:function(b){a.set(this._buttonDijits[b].domNode,"display","none")},getTool:function(){if(this.activeTool)return{toolName:this.activeTool,unitName:this.getUnit()}},getUnit:function(){if("unit"!==this._unitDropDown.label)return this._unitDropDown.label},_setupLocationTool:function(){this._map.navigationManager.setImmediateClick(!0);this._measureGraphics=[];this._map.graphics.remove(this._locationGraphic);this._createLocationUnitList();"PCS"===this._map.cs&&(this._projectMapExtent(this._map.extent),
this._mapExtentChangeHandler=d.connect(this._map,"onExtentChange",g.hitch(this,this._projectMapExtent)));this._clickMapHandler=d.connect(this._map,"onClick",this,"_locationClickHandler");if("esriDegreeMinuteSeconds"===this.currentLocationUnit||"esriDecimalDegrees"===this.currentLocationUnit)this._mouseMoveMapHandler=d.connect(this._map,"onMouseMove",this,"_locationMoveHandler")},_locationButtonToggle:function(){this.clearResult();this.setTool("location")},_measureCustomPoint:function(b){this.setTool("location",
!0);"Web Mercator"===this._map.cs&&b.spatialReference!==this._map.spatialReference&&(b=B.geographicToWebMercator(b));this._measureGraphic=new u;this._measureGraphic.setSymbol(this._pointSymbol);this._measureGraphic.setGeometry(b);this._measureGraphics.push(this._measureGraphic);this._map.graphics.add(this._measureGraphic);this._currentGeometry=b;this._calculateLocation(b,!0)},_calculateLocation:function(b,a){var p=!("esriDegreeMinuteSeconds"===this.currentLocationUnit||"esriDecimalDegrees"===this.currentLocationUnit);
p&&this._mouseMoveMapHandler&&(d.disconnect(this._mouseMoveMapHandler),this._mouseMoveMapHandler=null);b=g.clone(b);if(a){if("Web Mercator"!==this.map.cs&&this.map.spatialReference&&4326!==this.map.spatialReference.wkid){this._projectLocation(b,p);return}this._updateMarkerLocation(b.x,b.y)}b=this._getGCSLocation(b);this._advancedLocationDisplayHandler(b,p,a)},_projectLocation:function(b,a){this._geometryService.project([b],new J({wkid:4326}),g.hitch(this,function(b){this._advancedLocationDisplayHandler(b[0],
a,!0)}),g.hitch(this,function(b){console.log(this._gsErrorMsg,b)}))},_advancedLocationDisplayHandler:function(b,a,c){a?this._updateGeocoordinateStringLocation({coordinates:[[b.x,b.y]],sr:{wkid:4326},conversionType:this._unitStrings[this.currentLocationUnit]},b):(a=this._calculateXY(b.x,b.y),c?(this._updateClickLocation(a[0],a[1]),this.onMeasureEnd(this.activeTool,b,[a[0],a[1]],this.getUnit())):this._updateMouseLocation(a[0],a[1]))},_updateMarkerLocation:function(b,a){this.markerLocationX=b;this.markerLocationY=
a},_updateMouseLocation:function(b,a){this.mouseLongitude.innerHTML=b;this.mouseLatitude.innerHTML=a},_updateClickLocation:function(b,a){this._updateMouseLocation(b,a);this.markerLongitude.innerHTML=b;this.markerLatitude.innerHTML=a},_updateGeocoordinateStringLocation:function(b,a){this.resultValue.setContent("\x26nbsp");this._geometryService.toGeoCoordinateString(b,g.hitch(this,function(b){clearTimeout(this._calcTimer);b?(this.resultValue.setContent(b[0]),this.onMeasureEnd(this.activeTool,a,b,this.getUnit())):
(this.resultValue.setContent(this._gsErrorMsg),this.onMeasureEnd(this.activeTool,null,null,this.getUnit()))}));clearTimeout(this._calcTimer);this._calcTimer=setTimeout(g.hitch(this,function(){this.resultValue.setContent(this._calculatingMsg)},1E3))},_switchLocationUnit:function(b){e.byNode(this._unitDropDown.domNode).set("label",this._unitStrings[b]);this.currentLocationUnit=b;d.disconnect(this._mouseMoveMapHandler);this._mouseMoveMapHandler=null;this.onUnitChange(this._unitStrings[b],this.activeTool);
if("esriDegreeMinuteSeconds"===b||"esriDecimalDegrees"===b)this._mouseMoveMapHandler=d.connect(this._map,"onMouseMove",this,"_locationMoveHandler"),this._toggleLocationResultsTable(!0,!1),this._locationGraphic&&this._calculateLocation(this._locationGraphic.geometry,!0);else if(this._toggleLocationResultsTable(!1,!1),null!==this.resultValue&&(null!==this.markerLocationX||null!==this.markerLocationY)&&this._locationGraphic){var a=this._getGCSLocation(this._locationGraphic.geometry);this._updateGeocoordinateStringLocation({coordinates:[[a.x,
a.y]],sr:{wkid:4326},conversionType:this._unitStrings[b]},this._locationGraphic.geometry)}},_toggleLocationResultsTable:function(b,a){a&&(this.resultValue.setContent("\x26nbsp"),this.markerLongitude.innerHTML="---",this.markerLatitude.innerHTML="---",this.mouseLongitude.innerHTML="---",this.mouseLatitude.innerHTML="---");b?(C.show(this.resultTable.domNode),C.hide(this.resultValueContainer.domNode)):(C.hide(this.resultTable.domNode),C.show(this.resultValueContainer.domNode),d.disconnect(this._mouseMoveMapHandler));
"PCS"===this._map.cs&&C.hide(this._mouseRow)},_setupDistanceTool:function(){this._map.navigationManager.setImmediateClick(!0);"PCS"===this._map.cs&&(this._projectMapExtent(this._map.extent),this._mapExtentChangeHandler=d.connect(this._map,"onExtentChange",this,"_projectMapExtent"));this._inputPoints=[];this._createDistanceUnitList();this._mouseClickMapHandler=d.connect(this._map,"onClick",this,"_measureDistanceMouseClickHandler");this._doubleClickMapHandler=d.connect(this._map,"onDblClick",this,"_measureDistanceDblClickHandler")},
_distanceButtonToggle:function(){this.clearResult();this.setTool("distance")},_measureCustomDistance:function(b){if(1<b.paths[0].length){this.setTool("distance",!0);this._inputPoints=[];h.forEach(b.paths[0],g.hitch(this,function(a,p){this._inputPoints.push(a);var c=new u(new I(a[0],a[1],b.spatialReference),this._pointSymbol);this._measureGraphics.push(c);this._map.graphics.add(c);0!==p&&(this.result+=this._geodesicDistance(a,b.paths[0][p-1]))}));this._measureGraphic=new u;this._measureGraphic.setSymbol(this._lineSymbol);
this._measureGraphics.push(this._measureGraphic);var a=this._densifyGeometry(b);this._measureGraphic.setGeometry(a);this._map.graphics.add(this._measureGraphic);this._inputPoints=[];a=this._outputResult(this.result,this.getUnit());this._currentGeometry=b;this.onMeasureEnd(this.activeTool,b,a,this.getUnit())}},_showDistance:function(b){b&&this._outputResult(b,e.byNode(this._unitDropDown.domNode).label)},_setupAreaTool:function(){this._map.navigationManager.setImmediateClick(!0);this._inputPoints=[];
this._createAreaUnitList();this._tempGraphic=new u;this._tempGraphic.setSymbol(this._areaLineSymbol);this._tempGraphic.setGeometry(new w(this._map.spatialReference));this._map.graphics.add(this._tempGraphic);"PCS"===this._map.cs&&(this._geometryAreaHandler=d.connect(this._geometryService,"onAreasAndLengthsComplete",this,"_outputArea"));this._mouseClickMapHandler=d.connect(this._map,"onClick",this,"_measureAreaMouseClickHandler");this._doubleClickMapHandler=d.connect(this._map,"onDblClick",this,"_measureAreaDblClickHandler")},
_areaButtonToggle:function(){this.clearResult();this.setTool("area")},_generatePolygonFromPaths:function(){var b=[];h.forEach(this._polylineGraphics,g.hitch(this,function(a){h.forEach(a.geometry.paths,g.hitch(this,function(a){h.forEach(a,g.hitch(this,function(a){b.push(a)}))}))}));b.push(b[0]);var a=new G(this._map.spatialReference);a.addRing(b);var a=this._densifyGeometry(a),c=new u;c.setGeometry(a);c.setSymbol(this._borderlessFillSymbol);this._measureGraphic=c;this._measureGraphics.push(c);return c},
_getArea:function(b){var a=[],c=new K;c.areaUnit=M.UNIT_SQUARE_METERS;c.calculationType="geodesic";G.prototype.isSelfIntersecting(b)?this._geometryService.simplify([b],g.hitch(this,function(b){h.forEach(b,g.hitch(this,function(p){"PCS"===this._map.cs?(c.polygons=b,this._geometryService.areasAndLengths(c)):("Web Mercator"===this._map.cs&&(p=B.webMercatorToGeographic(p)),a.push(p))}));var p=E.geodesicAreas(a,F.SQUARE_METERS);this._showArea(p[0])})):("Web Mercator"===this._map.cs&&(b=B.webMercatorToGeographic(b)),
a.push(b),"PCS"===this._map.cs?(c.polygons=a,this._geometryService.areasAndLengths(c)):(b=E.geodesicAreas(a,F.SQUARE_METERS),this._showArea(Math.abs(b[0]))))},_outputArea:function(b){this._showArea(Math.abs(b.areas[0]))},_showArea:function(b){if(b)if(this.result=b,b=e.byNode(this._unitDropDown.domNode).label,b=this._outputResult(this.result,b),this._mouseMoveMapHandler)this.onMeasure(this.activeTool,this._currentGeometry,b,this.getUnit(),null);else this.onMeasureEnd(this.activeTool,this._currentGeometry,
b,this.getUnit())},_measureCustomArea:function(b){this.setTool("area",!0);this._inputPoints=[];var a=this._densifyGeometry(b);this._currentGeometry=b;this._measureGraphic=new u;this._measureGraphic.setGeometry(a);this._measureGraphic.setSymbol(this._fillSymbol);this._measureGraphics.push(this._measureGraphic);this._map.graphics.add(this._measureGraphic);this._getArea(b);this._inputPoints=[]},_resetToolState:function(){var b=this._map;b.navigationManager.setImmediateClick(!1);this._dblClickZoom&&b.enableDoubleClickZoom();
this._inputPoints=[];d.disconnect(this._mouseClickMapHandler);d.disconnect(this._mouseMoveMapHandler);d.disconnect(this._doubleClickMapHandler);d.disconnect(this._mouseDragMapHandler);d.disconnect(this._clickMapHandler);d.disconnect(this._mapExtentChangeHandler);d.disconnect(this._geometryAreaHandler);this._mouseClickMapHandler=this._mouseMoveMapHandler=this._doubleClickMapHandler=this._mouseDragMapHandler=this._clickMapHandler=this._mapExtentChangeHandler=this._geometryAreaHandler=null;b.snappingManager&&
b.snappingManager._snappingGraphic&&b.graphics.remove(b.snappingManager._snappingGraphic);this._map.snappingManager&&(this._map.snappingManager._stopSelectionLayerQuery(),this._map.snappingManager._killOffSnapping());this._unitDropDown._opened&&this._unitDropDown.closeDropDown()},_measureCustomGeometry:function(b){this.clearResult();switch(b.type){case "point":this._measureCustomPoint(b);break;case "polyline":this._measureCustomDistance(b);break;case "polygon":this._measureCustomArea(b)}},_densifyGeometry:function(b){var a=
this._map.cs,c=E.getSpheroidInfo(b.spatialReference).radius*this._densificationRatio;"Web Mercator"===a?(b=B.webMercatorToGeographic(b),c=E.geodesicDensify(b,c),c=B.geographicToWebMercator(c)):c="PCS"===a?b:E.geodesicDensify(b,c);return c},_geodesicDistance:function(b,a){var c=new w(this._map.spatialReference);"PCS"===this._map.cs&&(b=this._getGCSLocation(b),a=this._getGCSLocation(a));c.addPath([b,a]);"Web Mercator"===this._map.cs&&(c=B.webMercatorToGeographic(c));return E.geodesicLengths([c],F.METERS)[0]},
_calculateXY:function(b,a){var c=z.widgets.measurement,p=this._map.getScale(),d,e;if(this.getUnit()===c.NLS_decimal_degrees)e=500<=p?6:500>p&&50<=p?7:50>p&&5<=p?8:9,d=b.toFixed(e),this._map.spatialReference._isWrappable()||(d=this._roundX(d)),d=D.format(d),e=D.format(this._roundY(a.toFixed(e)));else if(this.getUnit()===c.NLS_deg_min_sec){var f=c=!1,g,h;e=9E4<=p?0:9E4>p&&9E3<=p?1:9E3>p&&900<=p?2:900>p&&90<p?3:4;0>b&&(c=!0,b=Math.abs(b));0>a&&(f=!0,a=Math.abs(a));a=this._roundY(a);this._map.spatialReference._isWrappable()||
(b=this._roundX(b));g=Math.floor(a)+"\u00b0";d=Math.floor(b)+"\u00b0";h=Math.floor(this._getDegreeMinutes(a))+"'";p=Math.floor(this._getDegreeMinutes(b))+"'";a=D.format(this._getDegreeSeconds(a).toFixed(e))+'"';b=D.format(this._getDegreeSeconds(b).toFixed(e))+'"';e=g+h+a;d=d+p+b;c&&(d="-"+d);f&&(e="-"+e)}return[d,e]},_getDegreeMinutes:function(a){return 60*(a-Math.floor(a))},_getDegreeSeconds:function(a){return 60*(60*(a-Math.floor(a))-Math.floor(60*(a-Math.floor(a))))},_roundY:function(a){90<a?a=
90:-90>a&&(a=-90);return a},_roundX:function(a){180<a?a=180:-180>a&&(a=-180);return a},_getGCSLocation:function(a){a=g.clone(a);var b=this._map,c=b.extent,d=b._newExtent;"Web Mercator"===b.cs?a=B.webMercatorToGeographic(a):"PCS"===b.cs?d&&(a=new I((a.x-c.xmin)*Math.abs((d.xmax-d.xmin)/(c.xmax-c.xmin))+d.xmin,(a.y-c.ymin)*Math.abs((d.ymax-d.ymin)/(c.ymax-c.ymin))+d.ymin,b.spatialReference)):a=a.normalize();return a},_projectMapExtent:function(a){a=new u(a);var b=new J({wkid:4326});this._geometryService.project([a.geometry],
b,g.hitch(this,function(a){if(!this._mouseMoveMapHandler&&"location"===this.activeTool){if("esriDegreeMinuteSeconds"===this.currentLocationUnit||"esriDecimalDegrees"===this.currentLocationUnit)this._mouseMoveMapHandler=d.connect(this._map,"onMouseMove",g.hitch(this,this._locationMoveHandler));this._mouseMoveMapHandler=d.connect(this._map,"onMouseMove",g.hitch(this,this._locationMoveHandler))}this._map._newExtent=a[0]}))},_checkCS:function(a){if(a.wkid)return 3857===a.wkid||102100===a.wkid||102113===
a.wkid?"Web Mercator":P.isDefined(Q[a.wkid])?"PCS":"GCS";if(a.wkt)return-1!==a.wkt.indexOf("WGS_1984_Web_Mercator")?"Web Mercator":0===a.wkt.indexOf("PROJCS")?"PCS":"GCS"},_switchUnit:function(a){"distance"===this.activeTool?this.currentDistanceUnit=a:"area"===this.activeTool?this.currentAreaUnit=a:"location"===this.activeTool&&(this.currentLocationUnit=a);e.byNode(this._unitDropDown.domNode).set("label",this._unitStrings[a]);if(null!==this.result){var b=this._outputResult(this.result,this._unitStrings[a]);
this.onUnitChange(this._unitStrings[a],this.activeTool);if(null!==this._currentGeometry||null!==this._measureGraphic)if(a=this._currentGeometry||this._measureGraphic.geometry,this._mouseMoveMapHandler)this.onMeasure(this.activeTool,a,b,this.getUnit(),null);else this.onMeasureEnd(this.activeTool,a,b,this.getUnit())}},_setupDictionaries:function(){var a=z.widgets.measurement;this._unitDictionary[a.NLS_length_meters]=1;this._unitDictionary[a.NLS_length_kilometers]=1E3;this._unitDictionary[a.NLS_length_feet]=
.3048;this._unitDictionary[a.NLS_length_miles]=1609.344;this._unitDictionary[a.NLS_length_yards]=.9144;this._unitDictionary[a.NLS_length_nautical_miles]=1852;this._unitDictionary[a.NLS_length_miles_us]=1609.347218694438;this._unitDictionary[a.NLS_length_feet_us]=.3048006096012192;this._unitDictionary[a.NLS_length_yards_us]=.9144018288036576;this._unitDictionary[a.NLS_area_sq_meters]=1;this._unitDictionary[a.NLS_area_sq_kilometers]=1E6;this._unitDictionary[a.NLS_area_sq_feet]=.09290304;this._unitDictionary[a.NLS_area_acres]=
4046.8564224;this._unitDictionary[a.NLS_area_sq_miles]=2589988.110336;this._unitDictionary[a.NLS_area_hectares]=1E4;this._unitDictionary[a.NLS_area_sq_yards]=.83612736;this._unitDictionary[a.NLS_area_sq_nautical_miles]=3429904;this._unitDictionary[a.NLS_area_acres_us]=4046.872609874252;this._unitDictionary[a.NLS_area_sq_miles_us]=2589998.470319522;this._unitDictionary[a.NLS_area_sq_feet_us]=.09290341161327487;this._unitDictionary[a.NLS_area_sq_yards_us]=.8361307045194736;this._unitStrings={esriMiles:a.NLS_length_miles,
esriKilometers:a.NLS_length_kilometers,esriFeet:a.NLS_length_feet,esriFeetUS:a.NLS_length_feet_us,esriMeters:a.NLS_length_meters,esriYards:a.NLS_length_yards,esriNauticalMiles:a.NLS_length_nautical_miles,esriMilesUS:a.NLS_length_miles_us,esriYardsUS:a.NLS_length_yards_us,esriAcres:a.NLS_area_acres,esriSquareMiles:a.NLS_area_sq_miles,esriSquareKilometers:a.NLS_area_sq_kilometers,esriHectares:a.NLS_area_hectares,esriSquareYards:a.NLS_area_sq_yards,esriSquareFeet:a.NLS_area_sq_feet,esriSquareFeetUS:a.NLS_area_sq_feet_us,
esriSquareMeters:a.NLS_area_sq_meters,esriAcresUS:a.NLS_area_acres_us,esriSquareMilesUS:a.NLS_area_sq_miles_us,esriSquareYardsUS:a.NLS_area_sq_yards_us,esriSquareNauticalMiles:a.NLS_area_sq_nautical_miles,esriDecimalDegrees:a.NLS_decimal_degrees,esriDegreeMinuteSeconds:a.NLS_deg_min_sec,esriMGRS:a.NLS_MGRS,esriUSNG:a.NLS_USNG,esriUTM:a.NLS_UTM,esriGARS:a.NLS_GARS,esriGeoRef:a.NLS_GeoRef,esriDDM:a.NLS_DDM,esriDD:a.NLS_DD};this._locationUnitStrings=[a.NLS_decimal_degrees,a.NLS_deg_min_sec,a.NLS_MGRS,
a.NLS_USNG,a.NLS_UTM,a.NLS_GeoRef,a.NLS_GARS];this._locationUnitStringsLong="esriDecimalDegrees esriDegreeMinuteSeconds esriMGRS esriUSNG esriUTM esriGeoRef esriGARS".split(" ");this._distanceUnitStrings=[a.NLS_length_miles,a.NLS_length_kilometers,a.NLS_length_feet,a.NLS_length_feet_us,a.NLS_length_meters,a.NLS_length_yards,a.NLS_length_nautical_miles];this._distanceUnitStringsLong="esriMiles esriKilometers esriFeet esriFeetUS esriMeters esriYards esriNauticalMiles".split(" ");this._areaUnitStrings=
[a.NLS_area_acres,a.NLS_area_sq_miles,a.NLS_area_sq_kilometers,a.NLS_area_hectares,a.NLS_area_sq_yards,a.NLS_area_sq_feet,a.NLS_area_sq_feet_us,a.NLS_area_sq_meters];this._areaUnitStringsLong="esriAcres esriSquareMiles esriSquareKilometers esriHectares esriSquareYards esriSquareFeet esriSquareFeetUS esriSquareMeters".split(" ");this._buttonDijits={area:this._areaButton,distance:this._distanceButton,location:this._locationButton};e.byNode(this._distanceButton.domNode).setLabel(a.NLS_distance);e.byNode(this._areaButton.domNode).setLabel(a.NLS_area);
e.byNode(this._locationButton.domNode).setLabel(a.NLS_location);e.byNode(this.resultLabel.domNode).setContent(a.NLS_resultLabel)},onToolChange:function(){},onUnitChange:function(){},onMeasureStart:function(){},onMeasure:function(){},onMeasureEnd:function(){},_measureAreaMouseClickHandler:function(a){var b;this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);b=b||a.mapPoint;this._inputPoints.push(b);this._currentStartPt=b;if(1===this._inputPoints.length){this._tempGraphic.setGeometry(new w(this._map.spatialReference));
for(a=0;a<this._measureGraphics.length;a++)this._map.graphics.remove(this._measureGraphics[a]);this._measureGraphics=[];this.result=0;this._outputResult(this.result,z.widgets.measurement.NLS_area_sq_meters);this._mouseMoveMapHandler=d.connect(this._map,"onMouseMove",this,"_measureAreaMouseMoveHandler");this.onMeasureStart(this.activeTool,this.getUnit())}this._measureGraphic=new u;this._measureGraphic.setSymbol(this._areaLineSymbol);this._measureGraphics.push(this._measureGraphic);if(1<this._inputPoints.length){a=
new w(this._map.spatialReference);a.addPath([this._inputPoints[this._inputPoints.length-2],b]);var c=new w(this._map.spatialReference);c.addPath([this._inputPoints[0],b]);b=this._densifyGeometry(a);c=this._densifyGeometry(c);this._tempGraphic.setGeometry(c);this._measureGraphic.setGeometry(b);this._map.graphics.add(this._measureGraphic);b=new u;b.setGeometry(a);this._polylineGraphics.push(b);if(2<this._inputPoints.length){b=new G(this._map.spatialReference);c=[];for(a=0;a<this._inputPoints.length;a++)c.push([this._inputPoints[a].x,
this._inputPoints[a].y]);c.push([this._inputPoints[0].x,this._inputPoints[0].y]);b.addRing(c);this._currentGeometry=b;this._polygonGraphic?(this._map.graphics.remove(this._polygonGraphic),this._polylineGraphics.push(this._tempGraphic),this._polygonGraphic=this._generatePolygonFromPaths(),this._map.graphics.add(this._polygonGraphic),this._measureGraphic=this._polygonGraphic,this._polylineGraphics.pop()):(this._polygonGraphic=this._generatePolygonFromPaths(),this._map.graphics.add(this._polygonGraphic));
this._getArea(b)}}else this._polygonGraphic&&(this._map.graphics.remove(this._polygonGraphic),this._polygonGraphic=null)},_measureAreaMouseMoveHandler:function(a){var b;if(0<this._inputPoints.length){var c=new w(this._map.spatialReference),d;this._map.snappingManager&&(d=this._map.snappingManager._snappingPoint);b=d||a.mapPoint;c.addPath([this._currentStartPt,b]);a=this._densifyGeometry(c);this._tempGraphic.setGeometry(a)}1<this._inputPoints.length&&(a=new w(this._map.spatialReference),a.addPath([b,
this._inputPoints[0]]),b=this._densifyGeometry(a),this._tempGraphic.setGeometry(this._tempGraphic.geometry.addPath(b.paths[0])))},_measureAreaDblClickHandler:function(a){d.disconnect(this._mouseMoveMapHandler);this._mouseMoveMapHandler=null;"touch"===this._map.navigationManager.eventModel&&c("ios")&&this._measureAreaMouseClickHandler(a);a=new G(this._map.spatialReference);var b=[],e;for(e=0;e<this._inputPoints.length;e++)b.push([this._inputPoints[e].x,this._inputPoints[e].y]);b.push([this._inputPoints[0].x,
this._inputPoints[0].y]);a.addRing(b);this._inputPoints=[];this._currentGeometry=a;this._polygonGraphic&&(this._map.graphics.remove(this._polygonGraphic),this._polylineGraphics.push(this._tempGraphic),this._polygonGraphic=this._generatePolygonFromPaths(),this._map.graphics.add(this._polygonGraphic));this._getArea(a);this._polylineGraphics=[]},_measureDistanceMouseClickHandler:function(a){var b;this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);a=b||a.mapPoint;this._inputPoints.push(a);
this._currentStartPt=a;if(1===this._inputPoints.length){for(b=0;b<this._measureGraphics.length;b++)this._map.graphics.remove(this._measureGraphics[b]);this._map.graphics.remove(this._tempGraphic);this._measureGraphics=[];this.result=0;this._outputResult(this.result,z.widgets.measurement.NLS_length_meters);this._tempGraphic=new u;this._tempGraphic.setSymbol(this._lineSymbol);this._map.graphics.add(this._tempGraphic);this._mouseMoveMapHandler=d.connect(this._map,"onMouseMove",this,"_measureDistanceMouseMoveHandler");
this.onMeasureStart(this.activeTool,this.getUnit())}this._tempGraphic.setGeometry(new w(this._map.spatialReference));b=new u;b.setSymbol(this._pointSymbol);b.setGeometry(a);this._measureGraphics.push(b);this._map.graphics.add(b);if(1<this._inputPoints.length){this._measureGraphic=new u;this._measureGraphic.setSymbol(this._lineSymbol);this._measureGraphics.push(this._measureGraphic);b=new w(this._map.spatialReference);b.addPath([this._inputPoints[this._inputPoints.length-2],a]);var c=this._densifyGeometry(b);
this._measureGraphic.setGeometry(c);this._map.graphics.add(this._measureGraphic);"PCS"===this._map.cs?this._geometryServiceLength(b,!1):(c=this._geodesicDistance(this._inputPoints[this._inputPoints.length-2],a),b=this._outputResult(c,this.getUnit()),this.result+=c,this._showDistance(this.result),c=this._outputResult(this.result,this.getUnit()),this.onMeasure(this.activeTool,a,c,this.getUnit(),b))}else b.setSymbol(this._pointSymbol)},_measureDistanceMouseMoveHandler:function(a){if(0<this._inputPoints.length){var b,
c=new w(this._map.spatialReference);this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);a=b||a.mapPoint;c.addPath([this._currentStartPt,a]);c=this._densifyGeometry(c);this._tempGraphic.setGeometry(c);"PCS"!==this._map.cs&&(b=this._geodesicDistance(this._currentStartPt,a),c=this._outputResult(b,this.getUnit()),b+=this.result,this._showDistance(b),b=this._outputResult(b,this.getUnit()),this.onMeasure(this.activeTool,a,b,this.getUnit(),c))}},_measureDistanceDblClickHandler:function(a){var b;
d.disconnect(this._mouseMoveMapHandler);this._mouseMoveMapHandler=null;"touch"===this._map.navigationManager.eventModel&&c("ios")&&this._measureDistanceMouseClickHandler(a);a=new w(this._map.spatialReference);a.addPath(this._inputPoints);this._currentGeometry=a;b=this._densifyGeometry(a);this._measureGraphic.geometry=b;"PCS"===this._map.cs?this._geometryServiceLength(a,!0):(this._inputPoints=[],this.onMeasureEnd(this.activeTool,a,this._outputResult(this.result,this.getUnit()),this.getUnit()))},_geometryServiceLength:function(a,
c){var b=new L;b.polylines=[a];b.lengthUnit=9001;b.calculationType="geodesic";this._geometryService.lengths(b,g.hitch(this,function(b){b=b.lengths[0];if(c)this.result=b,this._showDistance(this.result),this._inputPoints=[],this.onMeasureEnd(this.activeTool,a,this._outputResult(this.result,this.getUnit()),this.getUnit());else{var d=this._outputResult(b,this.getUnit());this.result+=b;this._showDistance(this.result);this.onMeasure(this.activeTool,a,this._outputResult(this.result,this.getUnit()),this.getUnit(),
d)}}))},_locationClickHandler:function(a){var b;this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);a=b||a.mapPoint;this._locationButtonToggle();this._locationGraphic=new u;this._locationGraphic.setGeometry(a);this._locationGraphic.setSymbol(this._pointSymbol);this._map.graphics.add(this._locationGraphic);this._measureGraphics.push(this._locationGraphic);this._calculateLocation(a,!0)},_locationMoveHandler:function(a){var b;this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);
this._calculateLocation(b||a.mapPoint,!1)},_outputResult:function(a,c){a/=this._unitDictionary[c];0===a?this.resultValue.setContent("\x26nbsp"):1E6<a?this.resultValue.setContent(D.format(a.toPrecision(9),{pattern:this.numberPattern})+" "+c):10>a?this.resultValue.setContent(D.format(a.toFixed(2),{pattern:this.numberPattern+"0"})+" "+c):this.resultValue.setContent(D.format(a.toFixed(2),{pattern:this.numberPattern})+" "+c);return a},_createDistanceUnitList:function(){var a,c=new x({style:"display: none;"});
h.forEach(this._distanceUnitStrings,g.hitch(this,function(a,b){a=new t({label:a,onClick:g.hitch(this,function(){this._switchUnit(this._distanceUnitStringsLong[b])})});a.set("class","unitDropDown");c.addChild(a)}));e.byNode(this._unitDropDown.domNode).set("dropDown",c);this.currentDistanceUnit?(a=this._unitStrings[this.currentDistanceUnit],e.byNode(this._unitDropDown.domNode).set("label",a)):(a=this._unitStrings[this._defaultDistanceUnit],e.byNode(this._unitDropDown.domNode).set("label",a),this.currentDistanceUnit=
this._defaultDistanceUnit)},_createAreaUnitList:function(){var a,c=new x({style:"display: none;"});h.forEach(this._areaUnitStrings,g.hitch(this,function(a,b){a=new t({label:a,onClick:g.hitch(this,function(){this._switchUnit(this._areaUnitStringsLong[b])})});a.set("class","unitDropDown");c.addChild(a)}));e.byNode(this._unitDropDown.domNode).set("dropDown",c);this.currentAreaUnit?(a=this._unitStrings[this.currentAreaUnit],e.byNode(this._unitDropDown.domNode).set("label",a)):(a=this._unitStrings[this._defaultAreaUnit],
e.byNode(this._unitDropDown.domNode).set("label",a),this.currentAreaUnit=this._defaultAreaUnit)},_createLocationUnitList:function(){var a;a=this._locationUnitStrings;var c=new x({style:"display: none;"});if(null===this._geometryService||!1===this.advancedLocationUnits)a=a.slice(0,2);h.forEach(a,g.hitch(this,function(a,b){a=new t({label:a,onClick:g.hitch(this,function(){this._switchLocationUnit(this._locationUnitStringsLong[b])})});a.set("class","unitDropDown");c.addChild(a)}));e.byNode(this._unitDropDown.domNode).set("dropDown",
c);this.currentLocationUnit||(this.currentLocationUnit=this._defaultLocationUnit);a=this._unitStrings[this.currentLocationUnit];e.byNode(this._unitDropDown.domNode).set("label",a);"esriDegreeMinuteSeconds"!==this.currentLocationUnit&&"esriDecimalDegrees"!==this.currentLocationUnit||this._toggleLocationResultsTable(!0,!1)},_drawPointGraphics:function(b){var d=this._pointSymbol,e=this._defaultCustomPointSymbolWidth,f=this._defaultCustomPointSymbolHeight,h,l;b=r.create("div",{"class":"esriLocationResultSymbol"},
b);b=n.createSurface(b,e,f);9>c("ie")&&(h=b.getEventSource(),a.set(h,"position","relative"),a.set(h.parentNode,"position","relative"));d=d.getShapeDescriptors();try{l=b.createShape(d.defaultShape).setFill(d.fill).setStroke(d.stroke)}catch(V){b.clear();b.destroy();return}var k=l.getBoundingBox(),d=k.width;h=k.height;var m=-(k.x+d/2),k=-(k.y+h/2);b=b.getDimensions();b={dx:m+b.width/2,dy:k+b.height/2};if(d>e||h>f)m=d/e>h/f,e=((m?e:f)-5)/(m?d:h),g.mixin(b,{xx:e,yy:e});l.applyTransform(b)}});c("extend-esri")&&
g.setObject("dijit.Measurement",q,N);return q});